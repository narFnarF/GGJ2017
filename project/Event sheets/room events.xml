<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>room events</name>
    <events>
        <include>emitter pen events</include>
        <comment>settings</comment>
        <variable constant="1" name="MAX_INSTRUMENTS" sid="544170108094473" static="0" type="number">7</variable>
        <variable constant="1" name="MAX_VARIATIONS" sid="902463580071685" static="0" type="number">3</variable>
        <comment>tracking variables</comment>
        <variable constant="0" name="currentLevel" sid="263851105402925" static="0" type="number">0</variable>
        <variable constant="0" name="currentSection" sid="116618215899975" static="0" type="number">1</variable>
        <variable constant="0" name="currentWave" sid="609255749712654" static="0" type="number">1</variable>
        <event-group description="" sid="556006138300398" title="Controls">
            <sub-events>
                <event-block sid="352422371878316">
                    <conditions>
                        <condition id="13" name="Gamepads are supported" sid="756075863531598" type="Gamepad" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="446055993339556">
                            <conditions>
                                <condition id="3" name="Is button down" sid="463885857640609" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">14</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="889543764468734" type="player">
                                    <param id="0" name="Control">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="562618078048580">
                            <conditions>
                                <condition id="3" name="Is button down" sid="693832929181868" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">15</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="169641465802382" type="player">
                                    <param id="0" name="Control">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="550508294855002">
                            <conditions>
                                <condition id="3" name="Is button down" sid="130829021494971" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">12</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="145064240280092" type="player">
                                    <param id="0" name="Control">2</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="287649817467517">
                            <conditions>
                                <condition id="3" name="Is button down" sid="115227717750801" type="Gamepad">
                                    <param id="0" name="Gamepad">0</param>
                                    <param id="1" name="Button">13</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="132548845321595" type="player">
                                    <param id="0" name="Control">3</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block disabled="1" sid="304101293309318">
                    <conditions />
                    <actions>
                        <action behavior="8Direction" id="9" name="Set vector X" sid="737153041225734" type="player">
                            <param id="0" name="Vector X">Gamepad.RawAxis(0, 0)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="629028763288617" title="preparing stuff">
            <sub-events>
                <event-block sid="191493947246880">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="493973392171880" type="System" />
                    </conditions>
                    <actions>
                        <action id="26" name="Set listener object" sid="294707170655397" type="Audio">
                            <param id="0" name="Object">player</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="971711231016664">
                            <conditions>
                                <condition id="-11" name="For Each" sid="693298932039081" type="System">
                                    <param id="0" name="Object">emitter</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="558492543041072" type="emitter">
                                    <param id="0" name="Instance variable">audioTag</param>
                                    <param id="1" name="Value">emitterLabel.Text</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>delete ceux des autres levels (pour pas loader mille choses inutiles)</comment>
                                <event-block sid="974328618305395">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="109366151104479" type="emitterLabel">
                                            <param id="0" name="Instance variable">level</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">currentLevel</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="730046044864638" type="emitter" />
                                    </actions>
                                </event-block>
                                <comment>preload tout ce qui est requis pour ce level</comment>
                                <event-block sid="898475758295351">
                                    <conditions />
                                    <actions>
                                        <action id="9" name="Preload (by name)" sid="381187454094644" type="Audio">
                                            <param id="0" name="Folder">1</param>
                                            <param id="1" name="Audio file name">emitter.audioTag</param>
                                        </action>
                                        <action id="14" name="Log" sid="457688751872085" type="Browser">
                                            <param id="0" name="Type">0</param>
                                            <param id="1" name="Message">&quot;preload &quot; &amp; emitter.audioTag</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="658521231797683">
                    <conditions>
                        <condition id="1" name="Preloads complete" sid="255343389943841" type="Audio" />
                        <condition id="-4" name="Trigger once while true" sid="960864757838555" type="System" />
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="899491116344913" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;preload complete&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="744351176855594">
                            <conditions>
                                <condition id="-11" name="For Each" sid="821575369087289" type="System">
                                    <param id="0" name="Object">emitter</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="28" name="Play at object (by name)" sid="514877135283410" type="Audio">
                                    <param id="0" name="Folder">1</param>
                                    <param id="1" name="Audio file name">emitter.audioTag</param>
                                    <param id="2" name="Loop">1</param>
                                    <param id="3" name="Volume">0</param>
                                    <param id="4" name="Object">emitter</param>
                                    <param id="5" name="Inner angle">360</param>
                                    <param id="6" name="Outer angle">360</param>
                                    <param id="7" name="Outer gain">0</param>
                                    <param id="8" name="Tag (optional)">emitter.audioTag</param>
                                </action>
                                <action id="2" name="Set muted" sid="456009809475526" type="Audio">
                                    <param id="0" name="Tag">emitter.audioTag</param>
                                    <param id="1" name="State">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="628756339080839">
                            <conditions />
                            <actions>
                                <action id="0" name="Call function" sid="404687085323492" type="Function">
                                    <param id="0" name="Name">&quot;spawn first emitter&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="417438558574382">
            <conditions>
                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="445973519554411" type="emitter">
                    <param id="0" name="Instance variable">active</param>
                </condition>
            </conditions>
            <actions>
                <action id="-2" name="Set Y" sid="808773242930784" type="emitter">
                    <param id="0" name="Y">player.Y + 250</param>
                </action>
            </actions>
        </event-block>
        <event-group description="" sid="168705400442144" title="collisions &amp; attach &amp; destroy &amp; stop audio">
            <sub-events>
                <variable constant="0" name="collidedInstrument" sid="415592084256187" static="0" type="number">0</variable>
                <variable constant="0" name="collidedUID" sid="888406868354815" static="0" type="number">0</variable>
                <comment>Emitter picked up!</comment>
                <comment>Remember: On collision is triggered only ONCE!</comment>
                <event-block sid="316617317847663">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="515521823437352" type="player">
                            <param id="0" name="Object">emitter</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="569452555593171" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;got one!&quot;</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="771411248004055" type="emitter">
                            <param id="0" name="Object">player</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action behavior="Pin" id="0" name="Pin to object" sid="464729415974102" type="emitter">
                            <param id="0" name="Pin to">player</param>
                            <param id="1" name="Mode">1</param>
                        </action>
                        <action id="0" name="Play" sid="392265650804152" type="Audio">
                            <param id="0" name="Audio file">Pickup_Coin7</param>
                            <param id="2" name="Loop">0</param>
                            <param id="3" name="Volume">-25</param>
                            <param id="1" name="Tag (optional)">&quot;pickup&quot;</param>
                        </action>
                        <action id="3" name="Set volume" sid="933864095258586" type="Audio">
                            <param id="0" name="Tag">emitter.audioTag</param>
                            <param id="1" name="dB">-10</param>
                        </action>
                        <action id="-9" name="Set value" sid="807805727247375" type="System">
                            <param id="0" name="Variable">collidedInstrument</param>
                            <param id="1" name="Value">emitterLabel.instrument</param>
                        </action>
                        <action id="-9" name="Set value" sid="796010427234148" type="System">
                            <param id="0" name="Variable">collidedUID</param>
                            <param id="1" name="Value">emitter.UID</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="769508810740586" type="emitter">
                            <param id="0" name="Instance variable">picked</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>Destroy all other emitter of the same instrument (in the current section), because we don&apos;t want to randomly pick them ever again</comment>
                        <event-block sid="249677403569606">
                            <conditions>
                                <condition id="-19" name="Pick all" sid="297834658029715" type="System">
                                    <param id="0" name="Object">emitter</param>
                                </condition>
                                <condition id="-14" inverted="1" name="Pick by unique ID" sid="709653980534869" type="emitter">
                                    <param id="0" name="Unique ID">collidedUID</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="563458991961523" type="emitterLabel">
                                    <param id="0" name="Instance variable">section</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">currentSection</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="664731384231590" type="emitterLabel">
                                    <param id="0" name="Instance variable">instrument</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">collidedInstrument</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="764911017258393" type="emitter" />
                            </actions>
                        </event-block>
                        <comment>Destroy the non-picked emitter</comment>
                        <event-block sid="475461656207505">
                            <conditions>
                                <condition id="-19" name="Pick all" sid="281035015895098" type="System">
                                    <param id="0" name="Object">emitter</param>
                                </condition>
                                <condition id="-8" name="Is boolean instance variable set" sid="705165467485919" type="emitter">
                                    <param id="0" name="Instance variable">active</param>
                                </condition>
                                <condition id="1" inverted="1" name="Is overlapping another object" sid="718319769808438" type="emitter">
                                    <param id="0" name="Object">player</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Destroy" sid="259018630203354" type="emitter" />
                            </actions>
                        </event-block>
                        <event-block sid="952054240373380">
                            <conditions />
                            <actions>
                                <action disabled="1" id="11" name="Set collisions enabled" sid="715852093403407" type="emitter">
                                    <param id="0" name="Collisions">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="211026577087959">
                            <conditions />
                            <actions>
                                <action id="-16" name="Wait" sid="981806724743713" type="System">
                                    <param id="0" name="Seconds">2</param>
                                </action>
                                <action id="0" name="Call function" sid="276755266456660" type="Function">
                                    <param id="0" name="Name">&quot;advance wave&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="250561156914325">
                    <conditions>
                        <condition id="-19" name="On destroyed" sid="315049947018790" type="emitter" />
                    </conditions>
                    <actions>
                        <action id="6" name="Stop" sid="594103173910800" type="Audio">
                            <param id="0" name="Tag">emitter.audioTag</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-block sid="931847693269505">
            <conditions>
                <condition id="0" name="On function" sid="514513896689731" type="Function">
                    <param id="0" name="Name">&quot;advance wave&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="-10" name="Add to" sid="961427690886073" type="System">
                    <param id="0" name="Variable">currentWave</param>
                    <param id="1" name="Value">1</param>
                </action>
                <action id="14" name="Log" sid="565059735996765" type="Browser">
                    <param id="0" name="Type">0</param>
                    <param id="1" name="Message">&quot;Entering wave &quot; &amp; currentWave</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="746312175863791">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="142919076191203" type="System">
                            <param id="0" name="Variable">currentWave</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Value">5</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="509154015480482" type="Function">
                            <param id="0" name="Name">&quot;spawn 2 emitters&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <comment>la fin</comment>
                <event-block sid="192150111637892">
                    <conditions>
                        <condition id="-22" name="Else" sid="155736772735719" type="System" />
                    </conditions>
                    <actions />
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="284693592774187">
            <conditions>
                <condition id="0" name="On function" sid="186178203259564" type="Function">
                    <param id="0" name="Name">&quot;spawn first emitter&quot;</param>
                </condition>
            </conditions>
            <actions />
            <sub-events>
                <variable constant="0" name="varX" sid="136279378594740" static="0" type="number">300</variable>
                <variable constant="0" name="varY" sid="555240108102543" static="0" type="number">200</variable>
                <event-block sid="562684034166768">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="380468454650423" type="emitterLabel">
                            <param id="0" name="Instance variable">section</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="160659150854903" type="emitterLabel">
                            <param id="0" name="Instance variable">instrument</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">3</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="920048034647319" type="emitterLabel">
                            <param id="0" name="Instance variable">variation</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="745187589368315" type="emitter">
                            <param id="0" name="X">player.X + varX</param>
                            <param id="1" name="Y">player.Y + varY</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="961037387660009" type="emitter">
                            <param id="0" name="Instance variable">active</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="620041709584763" type="emitter">
                            <param id="0" name="Instance variable">solo</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="2" name="Set muted" sid="396630798726620" type="Audio">
                            <param id="0" name="Tag">emitter.audioTag</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <event-block sid="368389885695218">
            <conditions>
                <condition id="0" name="On function" sid="809972090434340" type="Function">
                    <param id="0" name="Name">&quot;spawn 2 emitters&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="14" name="Log" sid="162789364120983" type="Browser">
                    <param id="0" name="Type">0</param>
                    <param id="1" name="Message">&quot;function Spawn 2&quot;</param>
                </action>
            </actions>
            <sub-events>
                <variable constant="0" name="varX" sid="959255289035880" static="0" type="number">300</variable>
                <variable constant="0" name="varY" sid="216209310846405" static="0" type="number">200</variable>
                <variable constant="0" name="firstInstrument" sid="391598099987897" static="0" type="number">0</variable>
                <comment>first</comment>
                <event-block sid="800923777503827">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="944455042961573" type="emitterLabel">
                            <param id="0" name="Instance variable">section</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">currentSection</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="284729542909060" type="emitter">
                            <param id="0" name="Instance variable">picked</param>
                        </condition>
                        <condition disabled="1" id="-7" name="Compare instance variable" sid="974689562236211" type="emitterLabel">
                            <param id="0" name="Instance variable">section</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">choose(4, 5, 6, 7)</param>
                        </condition>
                        <condition disabled="1" id="-7" name="Compare instance variable" sid="554173482734260" type="emitterLabel">
                            <param id="0" name="Instance variable">variation</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-16" name="Pick random instance" sid="423623094431670" type="System">
                            <param id="0" name="Object">emitter</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="965701020652541" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;first&quot;</param>
                        </action>
                        <action id="-3" name="Set position" sid="479928485057722" type="emitter">
                            <param id="0" name="X">player.X - varX</param>
                            <param id="1" name="Y">player.Y - varY</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="471503528016105" type="emitter">
                            <param id="0" name="Instance variable">active</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="2" name="Set muted" sid="869581084233875" type="Audio">
                            <param id="0" name="Tag">emitter.audioTag</param>
                            <param id="1" name="State">1</param>
                        </action>
                        <action id="-9" name="Set value" sid="734373937217012" type="System">
                            <param id="0" name="Variable">firstInstrument</param>
                            <param id="1" name="Value">emitterLabel.instrument</param>
                        </action>
                    </actions>
                </event-block>
                <comment>second</comment>
                <event-block sid="100580200500409">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="119980096944292" type="emitterLabel">
                            <param id="0" name="Instance variable">section</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">currentSection</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="904667010134808" type="emitterLabel">
                            <param id="0" name="Instance variable">instrument</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Value">firstInstrument</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="481377450528235" type="emitter">
                            <param id="0" name="Instance variable">picked</param>
                        </condition>
                        <condition id="-16" name="Pick random instance" sid="427298739553031" type="System">
                            <param id="0" name="Object">emitter</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="14" name="Log" sid="610530440925204" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;second&quot;</param>
                        </action>
                        <action id="-3" name="Set position" sid="236186676108766" type="emitter">
                            <param id="0" name="X">player.X + varX</param>
                            <param id="1" name="Y">player.Y - varY</param>
                        </action>
                        <action id="-13" name="Set boolean" sid="972218124633859" type="emitter">
                            <param id="0" name="Instance variable">active</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="2" name="Set muted" sid="189398654736755" type="Audio">
                            <param id="0" name="Tag">emitter.audioTag</param>
                            <param id="1" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block disabled="1" sid="486532933909819">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="385655609424639" type="emitterLabel">
                            <param id="0" name="Instance variable">section</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="372720756067880" type="emitterLabel">
                            <param id="0" name="Instance variable">instrument</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">5</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="306585789069788" type="emitterLabel">
                            <param id="0" name="Instance variable">variation</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">1</param>
                        </condition>
                    </conditions>
                    <actions />
                </event-block>
            </sub-events>
        </event-block>
        <variable constant="0" name="masterTime" sid="297606518208434" static="0" type="number">0</variable>
    </events>
</c2eventsheet>
